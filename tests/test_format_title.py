"""Test title formatting."""
import sys
import os
import pytest

sys.path.insert(0, os.path.abspath(os.path.join(os.path.dirname(__file__), "..")))
import cds_paper_bot  # pylint: disable=wrong-import-position


class TestFormatTitle(object):
    """List of titles and what they should look like after formatting."""

    @pytest.mark.parametrize(
        "input_title, expected",
        [
            ("Analysis at $\\sqrt s=13 TeV$", "Analysis at √(s) = 13 TeV"),
            ("\\sqrt s", "√(s)"),
            ("Analysis  of process $x \\rightarrowy$", "Analysis of process x → y"),
            ("$x__s$", "x_s"),
            ("x →y", "x → y"),
            ("$t\\overline tt$", "ttt"),
            ("$t\\bar{t}$", "tt̅"),
            ("$t \\bar{t}$", "tt̅"),
            ("$t \\overline t$", "tt"),
            ("\\overline xy", "xy"),
            ("Bethe--Bloch", "Bethe-Bloch"),
            ("Energies of 15keV and MeV, 6eV", "Energies of 15 keV and MeV, 6 eV"),
            ("13TeV", "13 TeV"),
            ("nonsenseTeV", "nonsenseTeV"),
            ("13tev", "13tev"),
            ("50eV", "50 eV"),
            # CMS cms_pas_feed
            # pylint: disable=line-too-long
            ("Measurement of the average very forward energy as a function of the track multiplicity at central rapidities in proton-proton collisions at $\\sqrt{s}=13~\\mathrm{TeV}$", "Measurement of the average very forward energy as a function of the track multiplicity at central rapidities in proton-proton collisions at √(s) = 13 TeV"),
            ("Search for direct $\\tau$ slepton pair production in proton-proton collisions at $\\sqrt{s}=13~\\mathrm{TeV}$", "Search for direct τ slepton pair production in proton-proton collisions at √(s) = 13 TeV"),
            ("Search for heavy resonances in the all-hadronic vector-boson pair final state with a multi-dimensional fit", "Search for heavy resonances in the all-hadronic vector-boson pair final state with a multi-dimensional fit"),
            ("Study of the $\\mathrm{B}^{+}\\rightarrow \\mathrm{J}/\\psi \\bar{\\Lambda} \\mathrm{p}$ decay in proton-proton collisions at $\\sqrt{s}= 8~\\mathrm{TeV}$", "Study of the B^+ → J/ψΛ̅p decay in proton-proton collisions at √(s) = 8 TeV"),
            ("Search for new physics in multilepton final states in pp collisions at $\\sqrt{s}=13~\\mathrm{TeV}$", "Search for new physics in multilepton final states in pp collisions at √(s) = 13 TeV"),
            ("Measurement of the $\\textrm{pp} \\rightarrow \\textrm{Z}\\textrm{Z}$ production cross section at $\\sqrt{s} = 13$ TeV with the Run 2 data set", "Measurement of the pp → ZZ production cross section at √(s) = 13 TeV with the Run 2 data set"),
            ("Search for standard model production of four top quarks in final states with same-sign and multiple leptons in proton-proton collisions at $\\sqrt{s}=13~\\mathrm{TeV}$", "Search for standard model production of four top quarks in final states with same-sign and multiple leptons in proton-proton collisions at √(s) = 13 TeV"),
            ("Search for a heavy Higgs boson decaying to a pair of W bosons in proton-proton collisions at $\\sqrt{s}=13~\\mathrm{TeV}$", "Search for a heavy Higgs boson decaying to a pair of W bosons in proton-proton collisions at √(s) = 13 TeV"),
            ("Search for heavy Higgs bosons decaying to a top quark pair in proton-proton collisions at $\\sqrt{s} = 13\\,\\mathrm{TeV}$", "Search for heavy Higgs bosons decaying to a top quark pair in proton-proton collisions at √(s) = 13 TeV"),
            ("Measurement of Higgs boson production and decay to the $\\tau\\tau$ final state", "Measurement of Higgs boson production and decay to the ττ final state"),
            ("Measurements of properties of the Higgs boson in the four-lepton final state in proton-proton collisions at $\\sqrt{s}=13~\\mathrm{TeV}$", "Measurements of properties of the Higgs boson in the four-lepton final state in proton-proton collisions at √(s) = 13 TeV"),
            ("First constraints on invisible Higgs boson decays using $\\mathrm{t}\\bar{\\mathrm{t}}\\mathrm{H}$ production at $\\sqrt{s}=13~\\mathrm{TeV}$", "First constraints on invisible Higgs boson decays using tt̅H production at √(s) = 13 TeV"),
            ("Combined search for gauge-mediated supersymmetry with photons in 13 TeV collisions at the CMS experiment", "Combined search for gauge-mediated supersymmetry with photons in 13 TeV collisions at the CMS experiment"),
            ("Evidence for WW production from double-parton interactions in proton-proton collisions at $\\sqrt{s}$ = 13 TeV", "Evidence for WW production from double-parton interactions in proton-proton collisions at √(s) = 13 TeV"),
            ("Search for $\\tau \\to 3\\mu$ decays using $\\tau$ leptons produced in D and B meson decays", "Search for τ → 3μ decays using τ leptons produced in D and B meson decays"),
            ("Search for physics beyond the standard model in events with two same-sign leptons or at least three leptons and jets in proton-proton collisions at $\\sqrt{s}=13~\\mathrm{TeV}$.", "Search for physics beyond the standard model in events with two same-sign leptons or at least three leptons and jets in proton-proton collisions at √(s) = 13 TeV."),
            ("Searches for new phenomena in events with jets and high values of the $M_{\\mathrm{T2}}$ variable, including signatures with disappearing tracks, in proton-proton collisions at $\\sqrt{s}=13~\\mathrm{TeV}$", "Searches for new phenomena in events with jets and high values of the M_T2 variable, including signatures with disappearing tracks, in proton-proton collisions at √(s) = 13 TeV"),
            ("Search for long-lived particles using delayed jets and missing transverse momentum with proton-proton collisions at $\\sqrt{s}$ = 13 TeV", "Search for long-lived particles using delayed jets and missing transverse momentum with proton-proton collisions at √(s) = 13 TeV"),
            ("Search for excited leptons decaying via contact interaction to two leptons and two jets", "Search for excited leptons decaying via contact interaction to two leptons and two jets"),
            ("Search for a pseudoscalar boson in the mass range from 4 to 15 GeV produced in decays of the 125 GeV Higgs boson in the final states with two muons and two nearby tracks at $\\sqrt{s}=13~\\mathrm{TeV}$", "Search for a pseudoscalar boson in the mass range from 4 to 15 GeV produced in decays of the 125 GeV Higgs boson in the final states with two muons and two nearby tracks at √(s) = 13 TeV"),
            ("Search for boosted quark-antiquark resonances produced in association with a photon at $\\sqrt{s}=13~\\mathrm{TeV}$", "Search for boosted quark-antiquark resonances produced in association with a photon at √(s) = 13 TeV"),
            ("Search for new physics in events with closely collimated photons and gluons", "Search for new physics in events with closely collimated photons and gluons"),
            ("Search for Pair Production of Vector-Like Quarks in the Fully Hadronic Channel", "Search for Pair Production of Vector-Like Quarks in the Fully Hadronic Channel"),
            ("Measurements of Higgs boson production via gluon fusion and vector boson fusion in the diphoton decay channel at $\\sqrt{s} = 13$ TeV", "Measurements of Higgs boson production via gluon fusion and vector boson fusion in the diphoton decay channel at √(s) = 13 TeV"),
            ("Search for a charged Higgs boson decaying into top and bottom quarks in proton-proton collisions at 13TeV in events with electrons or muons", "Search for a charged Higgs boson decaying into top and bottom quarks in proton-proton collisions at 13 TeV in events with electrons or muons"),
            # CMS cms_paper_feed
            ("Extraction and validation of a new set of CMS PYTHIA-8 tunes from underlying-event measurements", "Extraction and validation of a new set of CMS PYTHIA-8 tunes from underlying-event measurements"),
            ("Search for new physics in top quark production in dilepton final states in proton-proton collisions at $\\sqrt{s}$ = 13 TeV", "Search for new physics in top quark production in dilepton final states in proton-proton collisions at √(s) = 13 TeV"),
            ("Search for a low-mass $\\tau^{-}\\tau^{+}$ resonance in association with a bottom quark in proton-proton collisions at $\\sqrt{s} = $ 13 TeV", "Search for a low-mass τ^-τ^+ resonance in association with a bottom quark in proton-proton collisions at √(s) = 13 TeV"),
            ("Search for supersymmetry in final states with photons and missing transverse momentum in proton-proton collisions at 13 TeV", "Search for supersymmetry in final states with photons and missing transverse momentum in proton-proton collisions at 13 TeV"),
            ("Constraints on anomalous HVV couplings from the production of Higgs bosons decaying to $\\tau$ lepton pairs", "Constraints on anomalous HVV couplings from the production of Higgs bosons decaying to τ lepton pairs"),
            ("Performance of missing transverse momentum reconstruction in proton-proton collisions at $\\sqrt{s} = $ 13 TeV using the CMS detector", "Performance of missing transverse momentum reconstruction in proton-proton collisions at √(s) = 13 TeV using the CMS detector"),
            ("Search for charged Higgs bosons in the $\\mathrm{H}^{\\pm} \\to \\tau^{\\pm}\\nu_\\tau$ decay channel in proton-proton collisions at $\\sqrt{s} = $ 13 TeV", "Search for charged Higgs bosons in the H^± → τ^±ν_τ decay channel in proton-proton collisions at √(s) = 13 TeV"),
            ("Measurement of electroweak production of a W boson in association with two jets in proton-proton collisions at $\\sqrt{s} = $ 13 TeV", "Measurement of electroweak production of a W boson in association with two jets in proton-proton collisions at √(s) = 13 TeV"),
            ("An embedding technique to determine $\\tau\\tau$ backgrounds in proton-proton collision data", "An embedding technique to determine ττ backgrounds in proton-proton collision data"),
            ("Search for a heavy pseudoscalar boson decaying to a Z and a Higgs boson at $\\sqrt{s} = $ 13 TeV", "Search for a heavy pseudoscalar boson decaying to a Z and a Higgs boson at √(s) = 13 TeV"),
            ("Combinations of single-top-quark production cross-section measurements and $|f_{\\rm LV}V_{tb}|$ determinations at $\\sqrt{s}=7$ and 8 TeV with the ATLAS and CMS experiments", "Combinations of single-top-quark production cross-section measurements and |f_ LVV_tb| determinations at √(s) = 7 and 8 TeV with the ATLAS and CMS experiments"),
            ("Azimuthal separation in nearly back-to-back jet topologies in inclusive 2- and 3-jet events in pp collisions at $\\sqrt{s}=$ 13 TeV", "Azimuthal separation in nearly back-to-back jet topologies in inclusive 2- and 3-jet events in pp collisions at √(s) = 13 TeV"),
            ("Pseudorapidity distributions of charged hadrons in xenon-xenon collisions at ${\\sqrt {\\smash [b]{s_{_{\\mathrm {NN}}}}}} = $ 5.44 TeV", "Pseudorapidity distributions of charged hadrons in xenon-xenon collisions at √( [b]s_NN) = 5.44 TeV"),
            ("Measurement of exclusive $\\rho(770)^{0}$ photoproduction in ultraperipheral pPb collisions at ${\\sqrt {\\smash [b]{s_{_{\\mathrm {NN}}}}}} = $ 5.02 TeV", "Measurement of exclusive ρ(770)^0 photoproduction in ultraperipheral pPb collisions at √( [b]s_NN) = 5.02 TeV"),
            ("Observation of two excited $ \\mathrm{B^{+}_{c}} $ states and measurement of the ${\\mathrm{B^{+}_{c}} \\text{(2S)}}$ mass in pp collisions at $\\sqrt{s} = $ 13 TeV", "Observation of two excited B^+_c states and measurement of the B^+_c(2S) mass in pp collisions at √(s) = 13 TeV"),
            ("Search for W boson decays to three charged pions", "Search for W boson decays to three charged pions"),
            ("Charged-particle angular correlations in XeXe collisions at ${\\sqrt {\\smash [b]{s_{_{\\mathrm {NN}}}}}} = $ 5.44 TeV", "Charged-particle angular correlations in XeXe collisions at √( [b]s_NN) = 5.44 TeV"),
            ("Search for supersymmetry in events with a photon, jets, b-jets, and missing transverse momentum in proton-proton collisions at 13 TeV", "Search for supersymmetry in events with a photon, jets, b-jets, and missing transverse momentum in proton-proton collisions at 13 TeV"),
            ("Measurement of electroweak WZ boson production and search for new physics in WZ + two jets events in pp collisions at $\\sqrt{s} = $ 13 TeV", "Measurement of electroweak WZ boson production and search for new physics in WZ + two jets events in pp collisions at √(s) = 13 TeV"),
            ("Measurements of the ${{\\mathrm{p}}{\\mathrm{p}}\\to\\mathrm{W}\\mathrm{Z}}$  inclusive and differential production cross section and constraints on charged anomalous triple gauge couplings at ${\\sqrt{s}}  = $ 13 TeV", "Measurements of the pp → WZ inclusive and differential production cross section and constraints on charged anomalous triple gauge couplings at √(s) = 13 TeV"),
            ("Search for dark matter produced in association with a single top quark or a top quark pair in proton-proton collisions at $\\sqrt{s} = $ 13 TeV", "Search for dark matter produced in association with a single top quark or a top quark pair in proton-proton collisions at √(s) = 13 TeV"),
            ("Search for the pair production of light top squarks in the $\\mathrm{e}^{\\pm}\\mu^{\\mp}$ final state in proton-proton collisions at $\\sqrt{s} = $ 13 TeV", "Search for the pair production of light top squarks in the e^±μ^∓ final state in proton-proton collisions at √(s) = 13 TeV"),
            ("Measurements of the Higgs boson width and anomalous HVV couplings from on-shell  and off-shell  production in the four-lepton final state", "Measurements of the Higgs boson width and anomalous HVV couplings from on-shell and off-shell production in the four-lepton final state"),
            ("Measurement of the $ \\mathrm{t\\bar{t}} $ production cross section, the top quark mass, and the strong coupling constant using dilepton events in pp collisions at $\\sqrt{s} = $ 13 TeV", "Measurement of the tt̅ production cross section, the top quark mass, and the strong coupling constant using dilepton events in pp collisions at √(s) = 13 TeV"),
            ("Measurement of the differential Drell-Yan cross section in proton-proton collisions at $\\sqrt{s} = $ 13 TeV", "Measurement of the differential Drell-Yan cross section in proton-proton collisions at √(s) = 13 TeV"),
            # ATLAS atlas_conf_feed
            ("Search for bottom-squark pair production with the ATLAS detector in final states containing Higgs bosons, $b$-jets and missing transverse momentum", "Search for bottom-squark pair production with the ATLAS detector in final states containing Higgs bosons, b-jets and missing transverse momentum"),
            ("Search for heavy neutral Higgs bosons produced in association with $b$-quarks and decaying to $b$-quarks at $\\sqrt{s}=13$~TeV with the ATLAS detector", "Search for heavy neutral Higgs bosons produced in association with b-quarks and decaying to b-quarks at √(s) = 13 TeV with the ATLAS detector"),
            ("Measurement of the CP violation phase $\\phi_{s}$ in $B_{s}\\to J/\\psi \\phi$ decays in ATLAS at 13 TeV", "Measurement of the CP violation phase ϕ_s in B_s → J/ψϕ decays in ATLAS at 13 TeV"),
            ("Search for electroweak production of charginos and sleptons decaying in final states with two leptons and missing transverse momentum in $\\sqrt{s}=13$ TeV $pp$ collisions using the ATLAS detector", "Search for electroweak production of charginos and sleptons decaying in final states with two leptons and missing transverse momentum in √(s) = 13 TeV pp collisions using the ATLAS detector"),
            ("Search for New Phenomena in Dijet Events using 139 fb$^{−1}$ of $pp$ collisions at $\\sqrt{s}$ = 13TeV collected with the ATLAS Detector", "Search for New Phenomena in Dijet Events using 139 fb^−1 of pp collisions at √(s) = 13 TeV collected with the ATLAS Detector"),
            ("Search for long-lived, massive particles in events with a displaced vertex and a displaced muon in $pp$ collisions at $\\sqrt{s} = 13$ TeV with the ATLAS detector", "Search for long-lived, massive particles in events with a displaced vertex and a displaced muon in pp collisions at √(s) = 13 TeV with the ATLAS detector"),
            ("Combined measurements of Higgs boson production and decay using up to $80$ fb$^{-1}$ of proton--proton collision data at $\\sqrt{s}=$ 13 TeV collected with the ATLAS experiment", "Combined measurements of Higgs boson production and decay using up to 80 fb^-1 of proton-proton collision data at √(s) = 13 TeV collected with the ATLAS experiment"),
            ("Measurement of Higgs boson production in association with a $t\\overline t$ pair in the diphoton decay channel using 139~fb$^{-1}$ of LHC data collected at $\\sqrt{s} = 13$~TeV by the ATLAS experiment", "Measurement of Higgs boson production in association with a tt pair in the diphoton decay channel using 139 fb^-1 of LHC data collected at √(s) = 13 TeV by the ATLAS experiment"),
            ("Search for diboson resonances in hadronic final states in 139 fb$^{-1}$ of $pp$ collisions at $\\sqrt{s} = 13$ TeV with the ATLAS detector", "Search for diboson resonances in hadronic final states in 139 fb^-1 of pp collisions at √(s) = 13 TeV with the ATLAS detector"),
            ("Observation of light-by-light scattering in ultraperipheral Pb+Pb collisions with the ATLAS detector", "Observation of light-by-light scattering in ultraperipheral Pb+Pb collisions with the ATLAS detector"),
            ("Search for high-mass dilepton resonances using $139\\,\\mathrm{fb}^{-1}$ of $pp$ collision data collected at $\\sqrt{s}=13\\,\\mathrm{TeV}$ with the ATLAS detector", "Search for high-mass dilepton resonances using 139 fb^-1 of pp collision data collected at √(s) = 13 TeV with the ATLAS detector"),
            ("Calibration of the $b$-tagging eﬃciency on charm jets using a sample of $W$+$c$ events with $\\sqrt{s}$ = 13 TeV ATLAS data", "Calibration of the b-tagging eﬃciency on charm jets using a sample of W+c events with √(s) = 13 TeV ATLAS data"),
            ("Combination of searches for invisible Higgs boson decays with the ATLAS experiment", "Combination of searches for invisible Higgs boson decays with the ATLAS experiment"),
            ("Measurements of $VH$, $H \\to b\\bar{b}$ production as a function of the vector boson transverse momentum in 13 TeV pp collisions with the ATLAS detector", "Measurements of VH, H → bb̅ production as a function of the vector boson transverse momentum in 13 TeV pp collisions with the ATLAS detector"),
            ("Search for boosted resonances decaying to two b-quarks and produced in association with a jet at $\\sqrt{s}=13$ TeV with the ATLAS detector", "Search for boosted resonances decaying to two b-quarks and produced in association with a jet at √(s) = 13 TeV with the ATLAS detector"),
            ("Constraints on mediator-based dark matter models using $\\sqrt s = 13$ TeV $pp$ collisions at the LHC with the ATLAS detector", "Constraints on mediator-based dark matter models using √(s) = 13 TeV pp collisions at the LHC with the ATLAS detector"),
            ("Dijet azimuthal correlations and conditional yields in $p\\!p$ and $p$+Pb collisions at $\\sqrt{s_{_\\text{NN}}}$~=~5.02 TeV with the ATLAS detector", "Dijet azimuthal correlations and conditional yields in pp and p+Pb collisions at √(s_NN) = 5.02 TeV with the ATLAS detector"),
            ("Search for top quark decays t\\rightarrowHq with 36 fb^{−1} of pp collision data at \\sqrt{s} = 13 TeV with the ATLAS detector", "Search for top quark decays t → Hq with 36 fb^−1 of pp collision data at √(s) = 13 TeV with the ATLAS detector"),
            ("Measurements of inclusive and differential cross-sections of $t\\bar{t}\\gamma$ production in leptonic final states in a fiducial volume at $\\sqrt{s}=13~\\text{TeV}$ in ATLAS", "Measurements of inclusive and differential cross-sections of tt̅γ production in leptonic final states in a fiducial volume at √(s) = 13 TeV in ATLAS"),
            ("Measurement of the $t\\bar{t}W$ and $t\\bar{t}Z$ cross sections in proton–proton collisions at $\\sqrt{s}$ = 13 TeV with the ATLAS detector", "Measurement of the tt̅W and tt̅Z cross sections in proton–proton collisions at √(s) = 13 TeV with the ATLAS detector"),
            ("Study of the rare decays of B0s and B0 into muon pairs from data collected during 2015 and 2016 with the ATLAS detector", "Study of the rare decays of B0s and B0 into muon pairs from data collected during 2015 and 2016 with the ATLAS detector"),
            ("Calibration of the ATLAS $b$-tagging algorithm in $t\\bar{t}$ semi-leptonic events", "Calibration of the ATLAS b-tagging algorithm in tt̅ semi-leptonic events"),
            ("Search for charged lepton-flavour violation in top-quark decays at the LHC with the ATLAS detector", "Search for charged lepton-flavour violation in top-quark decays at the LHC with the ATLAS detector"),
            ("Combination of searches for Higgs boson pairs in $pp$ collisions at 13 TeV with the ATLAS experiment.", "Combination of searches for Higgs boson pairs in pp collisions at 13 TeV with the ATLAS experiment."),
            ("Search for direct chargino pair production with W-boson mediated decays in events with two leptons and missing transverse momentum at $\\sqrt{s} = 13$ TeV with the ATLAS detector", "Search for direct chargino pair production with W-boson mediated decays in events with two leptons and missing transverse momentum at √(s) = 13 TeV with the ATLAS detector"),
            # ATLAS atlas_paper_feed
            ("Observation of light-by-light scattering in ultraperipheral Pb+Pb collisions with the ATLAS detector", "Observation of light-by-light scattering in ultraperipheral Pb+Pb collisions with the ATLAS detector"),
            ("Evidence for the production of three massive vector bosons with the ATLAS detector", "Evidence for the production of three massive vector bosons with the ATLAS detector"),
            ("Measurement of the production cross section for a Higgs boson in association with a vector boson in the $H \\rightarrow WW^{\\ast} \\rightarrow \\ell\\nu\\ell\\nu$ channel in $pp$ collisions at $\\sqrt{s} = 13$ TeV with the ATLAS detector", "Measurement of the production cross section for a Higgs boson in association with a vector boson in the H → WW^∗ → ℓνℓν channel in pp collisions at √(s) = 13 TeV with the ATLAS detector"),
            ("Measurements of top-quark pair spin correlations in the $e\\mu$ channel at $\\sqrt{s} = 13$ TeV using $pp$ collisions in the ATLAS detector", "Measurements of top-quark pair spin correlations in the eμ channel at √(s) = 13 TeV using pp collisions in the ATLAS detector"),
            ("Search for high-mass dilepton resonances using 139 fb$^{-1}$ of $pp$ collision data collected at $\\sqrt{s}=13$ TeV with the ATLAS detector", "Search for high-mass dilepton resonances using 139 fb^-1 of pp collision data collected at √(s) = 13 TeV with the ATLAS detector"),
            ("Measurement of $VH$, $H\\to b\\bar{b}$ production as a function of the vector-boson transverse momentum in 13 TeV $pp$ collisions with the ATLAS detector", "Measurement of VH, H → bb̅ production as a function of the vector-boson transverse momentum in 13 TeV pp collisions with the ATLAS detector"),
            ("Measurement of jet-substructure observables in top quark, $W$ boson and light jet production in proton-proton collisions at $\\sqrt{s}=13$ TeV with the ATLAS detector", "Measurement of jet-substructure observables in top quark, W boson and light jet production in proton-proton collisions at √(s) = 13 TeV with the ATLAS detector"),
            ("Measurement of prompt photon production in $\\sqrt{s_\\mathrm{NN}} = 8.16$ TeV $p$+Pb collisions with ATLAS", "Measurement of prompt photon production in √(s_NN) = 8.16 TeV p+Pb collisions with ATLAS"),
            ("Constraints on mediator-based dark matter and scalar dark energy models using $\\sqrt{s}= 13$ TeV $pp$ collision data collected by the ATLAS detector", "Constraints on mediator-based dark matter and scalar dark energy models using √(s) = 13 TeV pp collision data collected by the ATLAS detector"),
            ("Search for heavy particles decaying into a top-quark pair in the fully hadronic final state in $pp$ collisions at $\\sqrt{s} =$13 TeV with the ATLAS detector", "Search for heavy particles decaying into a top-quark pair in the fully hadronic final state in pp collisions at √(s) = 13 TeV with the ATLAS detector"),
            ("Comparison of fragmentation functions for light-quark- and gluon-dominated jets from $pp$ and Pb+Pb collisions in ATLAS", "Comparison of fragmentation functions for light-quark- and gluon-dominated jets from pp and Pb+Pb collisions in ATLAS"),
            ("Searches for third-generation scalar leptoquarks in $\\sqrt{s} = 13$ TeV $pp$ collisions with the ATLAS detector", "Searches for third-generation scalar leptoquarks in √(s) = 13 TeV pp collisions with the ATLAS detector"),
            ("Combinations of single-top-quark production cross-section measurements and $|f_{\\rm LV}V_{tb}|$ determinations at $\\sqrt{s}=7$ and 8 TeV with the ATLAS and CMS experiments", "Combinations of single-top-quark production cross-section measurements and |f_ LVV_tb| determinations at √(s) = 7 and 8 TeV with the ATLAS and CMS experiments"),
            ("Measurement of the four-lepton invariant mass spectrum in 13 TeV proton-proton collisions with the ATLAS detector", "Measurement of the four-lepton invariant mass spectrum in 13 TeV proton-proton collisions with the ATLAS detector"),
            ("Measurement of $W^{\\pm}Z$ production cross sections and gauge boson polarisation in $pp$ collisions at $\\sqrt{s} = 13$ TeV with the ATLAS detector", "Measurement of W^±Z production cross sections and gauge boson polarisation in pp collisions at √(s) = 13 TeV with the ATLAS detector"),
            ("Electron reconstruction and identification in the ATLAS experiment using the 2015 and 2016 LHC proton-proton collision data at $\\sqrt{s} = 13$ TeV", "Electron reconstruction and identification in the ATLAS experiment using the 2015 and 2016 LHC proton-proton collision data at √(s) = 13 TeV"),
            ("Search for long-lived neutral particles in $pp$ collisions at $\\sqrt{s} = 13$ TeV that decay into displaced hadronic jets in the ATLAS calorimeter", "Search for long-lived neutral particles in pp collisions at √(s) = 13 TeV that decay into displaced hadronic jets in the ATLAS calorimeter"),
            ("Search for heavy charged long-lived particles in the ATLAS detector in 31.6 fb$^{-1}$ of proton-proton collision data at $\\sqrt{s} = 13$ TeV", "Search for heavy charged long-lived particles in the ATLAS detector in 31.6 fb^-1 of proton-proton collision data at √(s) = 13 TeV"),
            ("Searches for scalar leptoquarks and differential cross-section measurements in dilepton-dijet events in proton-proton collisions at a centre-of-mass energy of $\\sqrt{s} = 13$ TeV with the ATLAS experiment", "Searches for scalar leptoquarks and differential cross-section measurements in dilepton-dijet events in proton-proton collisions at a centre-of-mass energy of √(s) = 13 TeV with the ATLAS experiment"),
            ("Search for low-mass resonances decaying into two jets and produced in association with a photon using $pp$ collisions at $\\sqrt{s} = 13$ TeV with the ATLAS detector", "Search for low-mass resonances decaying into two jets and produced in association with a photon using pp collisions at √(s) = 13 TeV with the ATLAS detector"),
            ("Dijet azimuthal correlations and conditional yields in $pp$ and $p$+Pb collisions at $\\sqrt{s_{\\rm NN}}$ = 5.02 TeV with the ATLAS detector", "Dijet azimuthal correlations and conditional yields in pp and p+Pb collisions at √(s_ NN) = 5.02 TeV with the ATLAS detector"),
            ("Measurement of the ratio of cross sections for inclusive isolated-photon production in $pp$ collisions at $\\sqrt{s}=13$ and $8$ TeV with the ATLAS detector", "Measurement of the ratio of cross sections for inclusive isolated-photon production in pp collisions at √(s) = 13 and 8 TeV with the ATLAS detector"),
            ("Search for scalar resonances decaying into $\\mu^{+}\\mu^{-}$ in events with and without $b$-tagged jets produced in proton-proton collisions at $\\sqrt{s}=13$ TeV with the ATLAS detector", "Search for scalar resonances decaying into μ^+μ^- in events with and without b-tagged jets produced in proton-proton collisions at √(s) = 13 TeV with the ATLAS detector"),
            ("Measurement of the $t\\bar{t}Z$ and $t\\bar{t}W$ cross sections in proton-proton collisions at $\\sqrt{s}=13$ TeV with the ATLAS detector", "Measurement of the tt̅Z and tt̅W cross sections in proton-proton collisions at √(s) = 13 TeV with the ATLAS detector"),
            ("Search for top-quark decays $t \\rightarrow Hq$ with 36 fb$^{-1}$ of $pp$ collision data at $\\sqrt{s}=13$ TeV with the ATLAS detector", "Search for top-quark decays t → Hq with 36 fb^-1 of pp collision data at √(s) = 13 TeV with the ATLAS detector"),
            # ALICE alice_paper_feed
            ("One-dimensional charged kaon femtoscopy in p-Pb collisions at $\\sqrt{s_{\\rm NN}}$ = 5.02 TeV", "One-dimensional charged kaon femtoscopy in p-Pb collisions at √(s_ NN) = 5.02 TeV"),
            ("Investigations of anisotropic flow using multi-particle azimuthal correlations in pp, p$-$Pb, Xe$-$Xe, and Pb$-$Pb collisions at the LHC", "Investigations of anisotropic flow using multi-particle azimuthal correlations in pp, p-Pb, Xe-Xe, and Pb-Pb collisions at the LHC"),
            ("Multiplicity dependence of (anti-)deuteron production in pp collisions at $\\sqrt{s}$  = 7 TeV", "Multiplicity dependence of (anti-)deuteron production in pp collisions at √(s) = 7 TeV"),
            ("Calibration of the photon spectrometer PHOS of the ALICE experiment", "Calibration of the photon spectrometer PHOS of the ALICE experiment"),
            ("Measurement of D$^0$, D$^+$, D$^*$ and D$_s$ production in pp collisions at  $\\sqrt{s}$ = 5.02 TeV", "Measurement of D^0, D^+, D^* and D_s production in pp collisions at √(s) = 5.02 TeV"),
            ("Real-time data processing in the ALICE High Level Trigger at the LHC", "Real-time data processing in the ALICE High Level Trigger at the LHC"),
            ("Event-shape and multiplicity dependence of freeze-out radii in pp collisions at $\\sqrt{s}$ = 7 TeV", "Event-shape and multiplicity dependence of freeze-out radii in pp collisions at √(s) = 7 TeV"),
            ("Study of J/$\\psi$ azimuthal anisotropy at forward rapidity in Pb-Pb collisions at $\\sqrt{s_{\\rm NN}}$ = 5.02 TeV", "Study of J/ψ azimuthal anisotropy at forward rapidity in Pb-Pb collisions at √(s_ NN) = 5.02 TeV"),
            ("Charged-particle pseudorapidity density at mid-rapidity in p-Pb collisions at $\\sqrt{s_{\\rm{NN}}}$ = 8.16 TeV", "Charged-particle pseudorapidity density at mid-rapidity in p-Pb collisions at √(s_NN) = 8.16 TeV"),
            ("Jet fragmentation transverse momentum measurements from di-hadron correlations in $\\sqrt{s}$ = 7 TeV pp and $\\sqrt{s_{\\rm{NN}}}$ = 5.02 TeV p-Pb collisions", "Jet fragmentation transverse momentum measurements from di-hadron correlations in √(s) = 7 TeV pp and √(s_NN) = 5.02 TeV p-Pb collisions"),
            ("$\\Lambda_{\\rm c}^{+}$ production in Pb-Pb collisions at $\\sqrt{s_{\\rm NN}}=5.02$ TeV", "Λ_ c^+ production in Pb-Pb collisions at √(s_ NN) = 5.02 TeV"),
            ("Event-shape engineering for the D-meson elliptic flow in mid-central Pb-Pb collisions at $\\sqrt{s_{\\rm NN}}=5.02$ TeV", "Event-shape engineering for the D-meson elliptic flow in mid-central Pb-Pb collisions at √(s_ NN) = 5.02 TeV"),
            ("Energy dependence of exclusive $J/\\psi$ photoproduction off protons in ultra-peripheral p-Pb collisions at $\\sqrt{s_{\\rm{NN}}}$ = 5.02 TeV", "Energy dependence of exclusive J/ψ photoproduction off protons in ultra-peripheral p-Pb collisions at √(s_NN) = 5.02 TeV"),
            ("Charged jet cross section and fragmentation in proton-proton collisions at $\\sqrt{s}$ = 7 TeV", "Charged jet cross section and fragmentation in proton-proton collisions at √(s) = 7 TeV"),
            ("Measuring $\\rm{K}^{0}\\rm{K}^{\\pm}$ interactions using pp collisions at $\\sqrt{s}$ = 7 TeV", "Measuring K^0K^± interactions using pp collisions at √(s) = 7 TeV"),
            ("Multiplicity dependence of light-flavor hadron production in pp collisions at $\\sqrt{s}$ = 7 TeV", "Multiplicity dependence of light-flavor hadron production in pp collisions at √(s) = 7 TeV"),
            ("Medium modification of the shape of small-radius jets in central Pb-Pb collisions at $\\sqrt{s_{\\rm{NN}}}$ = 2.76 TeV", "Medium modification of the shape of small-radius jets in central Pb-Pb collisions at √(s_NN) = 2.76 TeV"),
            ("Measurement of dielectron production in central Pb-Pb collisions at $\\sqrt{{\\textit{s}}_{\\mathrm{NN}}}$ = 2.76 TeV", "Measurement of dielectron production in central Pb-Pb collisions at √(s_NN) = 2.76 TeV"),
            ("p-p, p-$\\Lambda$ and $\\Lambda$-$\\Lambda$ correlations studied via femtoscopy in pp reactions at $\\sqrt{s}$ = 7 TeV", "p-p, p-Λ and Λ-Λ correlations studied via femtoscopy in pp reactions at √(s) = 7 TeV"),
            ("Dielectron and heavy-quark production in inelastic and high-multiplicity proton-proton collisions at $\\sqrt{s} = 13$ TeV", "Dielectron and heavy-quark production in inelastic and high-multiplicity proton-proton collisions at √(s) = 13 TeV"),
            ("Centrality and pseudorapidity dependence of the charged-particle multiplicity density in Xe-Xe collisions at $\\sqrt{s_{\\rm NN}}$ = 5.44 TeV", "Centrality and pseudorapidity dependence of the charged-particle multiplicity density in Xe-Xe collisions at √(s_ NN) = 5.44 TeV"),
            ("Azimuthal anisotropy of heavy-flavour decay electrons in p-Pb collisions at $\\sqrt{s_{NN}}$ = 5.02 TeV", "Azimuthal anisotropy of heavy-flavour decay electrons in p-Pb collisions at √(s_NN) = 5.02 TeV"),
            ("Non-Flow and Flow studies with differential transverse momentum and number density correlations in p-Pb and Pb-Pb at LHC", "Non-Flow and Flow studies with differential transverse momentum and number density correlations in p-Pb and Pb-Pb at LHC"),
            ("Direct photon elliptic flow in Pb-Pb collisions at $\\sqrt{s_{NN}}$ = 2.76 TeV", "Direct photon elliptic flow in Pb-Pb collisions at √(s_NN) = 2.76 TeV"),
            ("Suppression of $\\Lambda(1520)$ resonance production in central Pb-Pb collisions at $\\sqrt{s_{NN}}$ = 2.76 TeV", "Suppression of Λ(1520) resonance production in central Pb-Pb collisions at √(s_NN) = 2.76 TeV"),
            # LHCb lhcb_paper_feed
            ("Measurements of $CP$ asymmetries in charmless four-body $\\Lambda^0_b$ and $\\Xi_b^0$ decays", "Measurements of CP asymmetries in charmless four-body Λ^0_b and Ξ_b^0 decays"),
            ("Observation of an excited $B_c^+$ state", "Observation of an excited B_c^+ state"),
            ("Near-threshold $D\\bar{D}$ spectroscopy and observation of a new charmonium state", "Near-threshold DD̅ spectroscopy and observation of a new charmonium state"),
            ("Search for lepton-universality violation in $B^+\\to K^+\\ell^+\\ell^-$ decays", "Search for lepton-universality violation in B^+ → K^+ℓ^+ℓ^- decays"),
            ("Observation of $C\\!P$ violation in charm decays", "Observation of CP violation in charm decays"),
            ("Measurement of the $CP$-violating phase $\\phi_s$ from $B_{s}^{0}\\to J/\\psi\\pi^+\\pi^-$ decays in 13 TeV $pp$ collisions", "Measurement of the CP-violating phase ϕ_s from B_s^0 → J/ψπ^+π^- decays in 13 TeV pp collisions"),
            ("Measurement of the mass difference between neutral charm-meson eigenstates", "Measurement of the mass difference between neutral charm-meson eigenstates"),
            ("Search for $CP$ violation in $D^+_s\\to K_S^0\\pi^+$, $D^+\\to K_S^0K^+$ and $D^+\\to\\phi\\pi^+$ decays", "Search for CP violation in D^+_s → K_S^0π^+, D^+ → K_S^0K^+ and D^+ → ϕπ^+ decays"),
            ("Amplitude analysis of $B^{0}_{s} \\rightarrow K^{0}_{\\textrm{S}} K^{\\pm}\\pi^{\\mp}$ decays", "Amplitude analysis of B^0_s → K^0_S K^±π^∓ decays"),
            ("Measurement of $b$-hadron fractions in 13 TeV $pp$ collisions", "Measurement of b-hadron fractions in 13 TeV pp collisions"),
            ("Dalitz Plot analysis of the $D^+ \\to K^- K^+ K^+$ decay", "Dalitz Plot analysis of the D^+ → K^- K^+ K^+ decay"),
            ("Observation of $B^0_{(s)} \\to J/\\psi p \\overline{p}$ decays and precision measurements of the $B^0_{(s)}$ masses", "Observation of B^0_(s) → J/ψ pp decays and precision measurements of the B^0_(s) masses"),
            ("Measurement of $B^+$, $B^0$ and $\\Lambda_b^0$ production in $p\\mkern 1mu\\mathrm{Pb}$ collisions at $\\sqrt{s_{NN}} = 8.16 \\ \\rm TeV$", "Measurement of B^+, B^0 and Λ_b^0 production in p 1muPb collisions at √(s_NN) = 8.16 TeV"),
            ("Measurement of the ratio of branching fractions of the decays $\\Lambda_b^0 \\!\\to \\psi(2S) \\Lambda$ and $\\Lambda_b^0 \\!\\to J\\!/\\!\\psi \\Lambda$", "Measurement of the ratio of branching fractions of the decays Λ_b^0 → ψ(2S) Λ and Λ_b^0 → J/ψΛ"),
            ("Measurement of the mass and production rate of $\\Xi_b^-$ baryons", "Measurement of the mass and production rate of Ξ_b^- baryons"),
            ("Model-independent observation of exotic contributions to $B^0\\to J/\\psi K^+\\pi^-$ decays", "Model-independent observation of exotic contributions to B^0 → J/ψ K^+π^- decays"),
            ("Measurement of the branching fraction and $C\\!P$ asymmetry in $B^{+}\\rightarrow J/\\psi \\rho^{+}$ decays", "Measurement of the branching fraction and CP asymmetry in B^+ → J/ψρ^+ decays"),
            ("Search for the rare decay $B^{+} \\rightarrow \\mu^{+}\\mu^{-}\\mu^{+}\\nu_{\\mu}$", "Search for the rare decay B^+ → μ^+μ^-μ^+ν_μ"),
            ("Study of the $B^0\\to \\rho(770)^0 K^*(892)^0$ decay with an amplitude analysis of $B^0\\to (\\pi^+\\pi^-) (K^+\\pi^-)$ decays", "Study of the B^0 → ρ(770)^0 K^*(892)^0 decay with an amplitude analysis of B^0 → (π^+π^-) (K^+π^-) decays"),
            ("Search for $CP$ violation through an amplitude analysis of $D^0\\rightarrow K^+ K^- \\pi^+ \\pi^-$ decays", "Search for CP violation through an amplitude analysis of D^0 → K^+ K^- π^+ π^- decays"),
            ("First measurement of charm production in fixed-target configuration at the LHC", "First measurement of charm production in fixed-target configuration at the LHC"),
            ("Study of $\\Upsilon$ production in $p$Pb collisions at $\\sqrt{s_{NN}}=8.16$ TeV", "Study of Υ production in pPb collisions at √(s_NN) = 8.16 TeV"),
            ("Measurement of the charm-mixing parameter $y_{CP}$", "Measurement of the charm-mixing parameter y_CP"),
            ("Measurement of the branching fractions of the decays $D^+\\rightarrow K^-K^+K^+$, $D^+\\rightarrow \\pi^-\\pi^+K^+$ and $D^+_s\\rightarrow\\pi^-K^+K^+$", "Measurement of the branching fractions of the decays D^+ → K^-K^+K^+, D^+ → π^-π^+K^+ and D^+_s → π^-K^+K^+"),
            ("Observation of two resonances in the $\\Lambda_b^0 \\pi^\\pm$ systems and precise measurement of $\\Sigma_b^\\pm$ and $\\Sigma_b^{*\\pm}$ properties", "Observation of two resonances in the Λ_b^0 π^± systems and precise measurement of Σ_b^± and Σ_b^*± properties"),
            # LHCb lhcb_conf_feed
            ("Prospects for searches for long-lived particles after the LHCb detector upgrades", "Prospects for searches for long-lived particles after the LHCb detector upgrades"),
            ("LHCb projections for proton-lead collisions during LHC Runs 3 and 4", "LHCb projections for proton-lead collisions during LHC Runs 3 and 4"),
            ("Measurement of $B^+$, $B^0$ and $\\Lambda_b^0$ production and nuclear modification in $p$Pb collisions at $\\sqrt{s_\\mathrm{NN}}=8.16 ~~\\text {TeV}$", "Measurement of B^+, B^0 and Λ_b^0 production and nuclear modification in pPb collisions at √(s_NN) = 8.16 TeV"),
            ("Study of coherent $J/\\psi$ production in lead-lead collisions at $\\sqrt{s_{\\rm NN}} =5\\ \\rm{TeV}$ with the LHCb experiment", "Study of coherent J/ψ production in lead-lead collisions at √(s_ NN) = 5 TeV with the LHCb experiment"),
            ("Update of the LHCb combination of the CKM angle $\\gamma$", "Update of the LHCb combination of the CKM angle γ"),
            ("Measurement of CP violation in the $B_s^0 \\to \\phi \\phi$ decay and search for the $B^0 \\to \\phi\\phi$ decay", "Measurement of CP violation in the B_s^0 → ϕϕ decay and search for the B^0 → ϕϕ decay"),
            ("Prompt $\\Lambda^+_{\\mathrm{c}}$ production in $p\\mathrm{Pb}$ collisions at $\\sqrt{s_{_{\\mathrm{NN}}}} = 5.02\\mathrm{\\,Te\\kern -0.1em V}$", "Prompt Λ^+_c production in pPb collisions at √(s_NN) = 5.02 Te -0.1em V"),
            ("Update of the LHCb combination of the CKM angle $\\gamma$ using $B\\to DK$ decays", "Update of the LHCb combination of the CKM angle γ using B → DK decays"),
            ("Measurement of antiproton production in $p$He collisions at $\\sqrt{s_{\\scriptscriptstyle\\rm NN}}=110$ GeV", "Measurement of antiproton production in pHe collisions at √(s_ NN) = 110 GeV"),
            ("Measurement of $J/\\psi$ and $D^0$ production in $p$Ar collisions at $\\sqrt{s_{NN}}=110$ GeV", "Measurement of J/ψ and D^0 production in pAr collisions at √(s_NN) = 110 GeV"),
            ("Measurement of time-dependent $C\\!P$-violating asymmetries in $B^0\\to\\pi^+\\pi^-$ and $B_s^0\\to K^+K^-$ decays at LHCb", "Measurement of time-dependent CP-violating asymmetries in B^0 → π^+π^- and B_s^0 → K^+K^- decays at LHCb"),
            ("First observation of a baryonic $B_s^0$ decay", "First observation of a baryonic B_s^0 decay"),
            ("Measurement of $C\\!P$ asymmetry in $B_s^0\\to D_s^{\\mp}K^{\\pm}$ decays", "Measurement of CP asymmetry in B_s^0 → D_s^∓K^± decays"),
            ("Study of the decay $B^{\\pm} \\to DK^{*\\pm}$ with two-body $D$ decays", "Study of the decay B^± → DK^*± with two-body D decays"),
            ("Evidence for the rare decay $\\Sigma^+ \\to p \\mu^+ \\mu^-$", "Evidence for the rare decay Σ^+ → p μ^+ μ^-"),
            ("Updated limit for the decay $K_{\\rm\\scriptscriptstyle S}^0\\rightarrow\\mu^+\\mu^-$", "Updated limit for the decay K_ S^0 → μ^+μ^-"),
            ("Search for the rare decays $B^0_{(s)}\\to\\tau^+\\tau^-$", "Search for the rare decays B^0_(s) → τ^+τ^-"),
            ("$CP$-violating asymmetries from the decay-time distribution of prompt $D^0 \\to K^+ K^-$ and $D^0 \\to \\pi^+\\pi^-$ decays in the full $\\mbox{LHCb}$ Run 1 data sample. Measurement using unbinned, acceptance corrected decay-time.", "CP-violating asymmetries from the decay-time distribution of prompt D^0 → K^+ K^- and D^0 → π^+π^- decays in the full LHCb Run 1 data sample. Measurement using unbinned, acceptance corrected decay-time."),
            ("$CP$-violating asymmetries from the decay-time distribution of  prompt $D^0 \\to K^+K^-$  and  $D^0 \\to \\pi^+\\pi^-$ decays in the  full LHCb Run~1 data sample. Measurement using yield asymmetries in bins of decay time.", "CP-violating asymmetries from the decay-time distribution of prompt D^0 → K^+K^- and D^0 → π^+π^- decays in the full LHCb Run 1 data sample. Measurement using yield asymmetries in bins of decay time."),
            ("Dalitz plot analysis of the  $D^+ \\rightarrow K^- K^+ K^+$ decay with the isobar model", "Dalitz plot analysis of the D^+ → K^- K^+ K^+ decay with the isobar model"),
            ("Central exclusive production of $J/\\psi$ and $\\psi(2S)$ mesons in pp collisions at $\\sqrt{s}=13$ TeV", "Central exclusive production of J/ψ and ψ(2S) mesons in pp collisions at √(s) = 13 TeV"),
            ("Search for $H^0 \\rightarrow b \\bar{b}$ or $c \\bar{c}$ in association with a $W$ or $Z$ boson in the forward region of $pp$ collisions", "Search for H^0 → bb̅ or cc̅ in association with a W or Z boson in the forward region of pp collisions"),
            ("LHCb dimuon and charm mass distributions", "LHCb dimuon and charm mass distributions"),
            ("Search for structure in the $B_s^0\\pi^\\pm$ invariant mass spectrum", "Search for structure in the B_s^0π^± invariant mass spectrum"),
            ("Study of cold nuclear matter effects using prompt $D^0$ meson production in $p\\mathrm{Pb}$ collisions at LHCb", "Study of cold nuclear matter effects using prompt D^0 meson production in pPb collisions at LHCb"),

        ],
    )
    def test_formatting(self, input_title, expected):
        """Test the list above."""
        new_title = cds_paper_bot.format_title(input_title)
        assert new_title == expected
